import{_ as a,c as o,o as e,d as s}from"./app.a6b88af1.js";const h=JSON.parse('{"title":"Docker - Instala\xE7\xE3o e Primeiros Passos","description":"","frontmatter":{},"headers":[{"level":2,"title":"Como instalar o Docker?","slug":"como-instalar-o-docker","link":"#como-instalar-o-docker","children":[{"level":3,"title":"Docker no Linux","slug":"docker-no-linux","link":"#docker-no-linux","children":[]},{"level":3,"title":"Docker no MacOs","slug":"docker-no-macos","link":"#docker-no-macos","children":[]},{"level":3,"title":"Docker no Windows","slug":"docker-no-windows","link":"#docker-no-windows","children":[]}]},{"level":2,"title":"Primeiros comandos no Docker","slug":"primeiros-comandos-no-docker","link":"#primeiros-comandos-no-docker","children":[{"level":3,"title":"docker ps","slug":"docker-ps","link":"#docker-ps","children":[]},{"level":3,"title":"docker pull","slug":"docker-pull","link":"#docker-pull","children":[]},{"level":3,"title":"docker run","slug":"docker-run","link":"#docker-run","children":[]}]}],"relativePath":"posts/2020/docker-instalacao-e-primeiros-passos.md"}'),r={name:"posts/2020/docker-instalacao-e-primeiros-passos.md"},n=s(`<h1 id="docker-instalacao-e-primeiros-passos" tabindex="-1">Docker - Instala\xE7\xE3o e Primeiros Passos <a class="header-anchor" href="#docker-instalacao-e-primeiros-passos" aria-hidden="true">#</a></h1><p>Neste artigo vamos come\xE7ar a colocar a m\xE3o na massa, instalando e aprendendo alguns comandos b\xE1sicos.</p><p>Antes de come\xE7ar a instala\xE7\xE3o vamos falar de alguns pontos importantes em rela\xE7\xE3o ao sistema operacional do host.</p><p>At\xE9 a algum tempo atr\xE1s voc\xEA s\xF3 conseguia rodar o Docker no Windows instalando o VirtualBox. Isso j\xE1 melhorou e agora o Docker roda de forma nativa no Windows tamb\xE9m, assim como no Linux que sempre rodou.</p><p>Em contrapartida, se voc\xEA usa Mac como eu, precisar\xE1 instalar o VirtualBox para rodar o Docker e, vai por mim, fica uma belezura mas s\xF3 quando t\xE1 desligado \u{1F923}. \xC9 s\xF3 ligar que fica horr\xEDvel. Dependendo do quanto voc\xEA vive fazendo build, sua maquina vai fritar, ficar lenta e muito ruim para trabalhar. Para voc\xEA ter id\xE9ia, eu acabei instalando o Ubuntu no Macbook Pro 2015 para poder trabalhar melhor, e agora sim ficou \xF3timo!</p><p>Eu n\xE3o uso Windows h\xE1 anos e at\xE9 te recomendaria usar Linux para usar o Docker, mas como agora tamb\xE9m roda sem VirtualBox l\xE1, imagino que possa rodar bem tamb\xE9m. Se voc\xEA testar, deixe seu coment\xE1rio aqui para sabermos!</p><h2 id="como-instalar-o-docker" tabindex="-1">Como instalar o Docker? <a class="header-anchor" href="#como-instalar-o-docker" aria-hidden="true">#</a></h2><p>Honestamente n\xE3o vejo motivos para gastar tanto texto explicando os passos da instala\xE7\xE3o, ent\xE3o vou resumir e apontar os links oficiais caso voc\xEA precise de ajuda extra.</p><h3 id="docker-no-linux" tabindex="-1">Docker no Linux <a class="header-anchor" href="#docker-no-linux" aria-hidden="true">#</a></h3><p>H\xE1 um script oficial maroto que faz todo o trabalho para voc\xEA:</p><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki"><code><span class="line"><span style="color:#A6ACCD;">curl -fsSL https://get.docker.com -o get-docker.sh</span></span>
<span class="line"><span style="color:#A6ACCD;">sudo sh get-docker.sh</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span></code></pre></div><p>Voc\xEA ter\xE1 o docker instalado mas seu usu\xE1rio comum ainda n\xE3o ter\xE1 acesso aos comandos principais do Docker. E, por favor, n\xE3o ache que usar <code>sudo</code> para tudo na sua pr\xF3pria m\xE1quina seja normal, sua vida ser\xE1 melhor se as coisas forem mais simples*.</p><p>PS: N\xE3o significa fazer seu usu\xE1rio ser root tamb\xE9m, ok? Mas o b\xE1sico para seu trabalho acontecer, coisas que voc\xEA faz toda hora, pode sim ser mais f\xE1cil.</p><p>Coloque seu usu\xE1rio no grupo do docker para poder rodar os comandos:</p><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki"><code><span class="line"><span style="color:#A6ACCD;">sudo usermod -aG docker $USER</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span></code></pre></div><p>Reinicie sua m\xE1quina.</p><h4 id="oracle-linux" tabindex="-1">Oracle Linux <a class="header-anchor" href="#oracle-linux" aria-hidden="true">#</a></h4><p>Recentemente precisei fazer a instala\xE7\xE3o em uma distribui\xE7\xE3o <code>Oracle Linux</code> e o setup padr\xE3o n\xE3o funcionou, se for o seu caso, <a href="https://dev.to/sr2ds/instalando-docker-no-oracle-linux-nd6" target="_blank" rel="noreferrer">este outro artigo</a> pode ajud\xE1-lo.</p><h3 id="docker-no-macos" tabindex="-1">Docker no MacOs <a class="header-anchor" href="#docker-no-macos" aria-hidden="true">#</a></h3><p>Voc\xEA precisar\xE1 ter o VirtualBox instalado e o procedimento de instala\xE7\xE3o ser\xE1 o mesmo do Docker (arrastar do finder). O link para download <a href="https://www.virtualbox.org/wiki/Downloads" target="_blank" rel="noreferrer">est\xE1 aqui</a>.</p><p><a href="https://hub.docker.com/editions/community/docker-ce-desktop-mac/" target="_blank" rel="noreferrer">Clique aqui</a>, baixe o <code>.dmg</code> clicando no bot\xE3o azul &quot;Get Docker Desktop for Mac (Stable)&quot;.</p><p>Faz aquela super instala\xE7\xE3o super complexa que s\xF3 no mac \xE9 poss\xEDvel.</p><p><img src="https://dev-to-uploads.s3.amazonaws.com/i/9ew552e0ikusslxxw90u.png" alt="Instala\xE7\xE3o do Docker no MacOs - Arrastar para instalar do Finder"></p><h3 id="docker-no-windows" tabindex="-1">Docker no Windows <a class="header-anchor" href="#docker-no-windows" aria-hidden="true">#</a></h3><p><a href="https://hub.docker.com/editions/community/docker-ce-desktop-windows/" target="_blank" rel="noreferrer">Clique aqui</a>, baixe o <code>.exe</code> clicando no bot\xE3o azul &quot;Get Docker Desktop for Windows (stable)&quot;.</p><p>Espere baixar e faz o de sempre, execute, next, next, finish.</p><h2 id="primeiros-comandos-no-docker" tabindex="-1">Primeiros comandos no Docker <a class="header-anchor" href="#primeiros-comandos-no-docker" aria-hidden="true">#</a></h2><p>Com o Docker instalado (uhu!) agora podemos come\xE7ar a desbravar essa aventura.</p><p>Vamos come\xE7ar listando e explicando o funcionamento b\xE1sico de alguns comandos b\xE1sicos, priorizando os mais utilizados no (meu) dia a dia. Alguns comandos ter\xE3o artigos dedicados, por isso aqui vamos falar apenas dos mais simples.</p><h3 id="docker-ps" tabindex="-1">docker ps <a class="header-anchor" href="#docker-ps" aria-hidden="true">#</a></h3><p>Em breve come\xE7aremos a criar containers e precisaremos gerenciar suas inst\xE2ncias, para isso o <code>docker ps</code> pode nos ajudar.</p><p>O <code>ps</code> nos permite visualizar quase tudo em rela\xE7\xE3o aos containers:</p><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki"><code><span class="line"><span style="color:#A6ACCD;"># Listar containers em execu\xE7\xE3o</span></span>
<span class="line"><span style="color:#A6ACCD;">docker ps</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span>
<span class="line"><span style="color:#A6ACCD;"># Listar containers em execu\xE7\xE3o e parados</span></span>
<span class="line"><span style="color:#A6ACCD;">docker ps -a</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span>
<span class="line"><span style="color:#A6ACCD;"># Listar somentes os Ids dos containers em execu\xE7\xE3o</span></span>
<span class="line"><span style="color:#A6ACCD;">docker ps -q</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span>
<span class="line"><span style="color:#A6ACCD;"># Listar apenas os nomes e ids dos containers ativos</span></span>
<span class="line"><span style="color:#A6ACCD;">docker ps --format &quot;{{.ID}}: {{.Names}}&quot;</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span></code></pre></div><p>Com este \xFAltimo comando voc\xEA pode formatar dos dados para melhorar a visualiza\xE7\xE3o e te dar mais poder quando precisar fazer scripts para automatizar as coisas.</p><p>Para mais exemplos de formata\xE7\xE3o no ps <a href="https://docs.docker.com/engine/reference/commandline/ps/#formatting" target="_blank" rel="noreferrer">clique aqui</a>.</p><h3 id="docker-pull" tabindex="-1">docker pull <a class="header-anchor" href="#docker-pull" aria-hidden="true">#</a></h3><p>Como falamos no artigo anterior, os containers precisam de imagens para existir, que s\xE3o registradas/gravadas/armazenadas em um servidor (p\xFAblico ou privado), geralmente chamado de Registry.</p><p>Existem muitas imagens oficiais e n\xE3o oficiais que podem facilitar sua vida, voc\xEA as encontrar\xE1 no <a href="https://hub.docker.com/" target="_blank" rel="noreferrer">DockerHub</a>.</p><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki"><code><span class="line"><span style="color:#A6ACCD;"># Baixando uma imagem latest</span></span>
<span class="line"><span style="color:#A6ACCD;">docker pull ubuntu</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span>
<span class="line"><span style="color:#A6ACCD;"># Baixando uma imagem com tag</span></span>
<span class="line"><span style="color:#A6ACCD;">docker pull ubuntu:14.04</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span></code></pre></div><p>Voc\xEA pode especificar qual \xE9 a tag da imagem, caso queira alguma especifica, ou simplesmente ter a <code>latest</code> por padr\xE3o.</p><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki"><code><span class="line"><span style="color:#A6ACCD;"># Ver imagens baixadas</span></span>
<span class="line"><span style="color:#A6ACCD;">docker images</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span></code></pre></div><p>Nota: Esses comandos padr\xF5es do docker v\xE3o trazer as imagens direto do DockerHub, por\xE9m, se voc\xEA especificar o caminho do seu pr\xF3prio registry.</p><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki"><code><span class="line"><span style="color:#A6ACCD;">docker pull myregistry.local:5000/testing/test-image</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span></code></pre></div><p>Indo al\xE9m: J\xE1 parou para pensar que o seu servidor de produ\xE7\xE3o poderia ter apenas a imagem mais atualizada ao inv\xE9s de toda a sua aplica\xE7\xE3o? Imagine qu\xE3o r\xE1pido seria colocar uma vers\xE3o e at\xE9 mesmo retornar a outra anterior? Se quiser saber mais sobre isso que, a prop\xF3sito tamb\xE9m \xE9 poss\xEDvel sem Docker, procure por <code>Blue Green Deploy</code> e <code>Canary Release</code>.</p><h3 id="docker-run" tabindex="-1">docker run <a class="header-anchor" href="#docker-run" aria-hidden="true">#</a></h3><p>J\xE1 sabemos que existem imagens e agora precisamos us\xE1-las.</p><p>O comando <code>docker run</code> \xE9 o cara que cria o container para n\xF3s.</p><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki"><code><span class="line"><span style="color:#A6ACCD;"># Cria container com a imagem ubuntu</span></span>
<span class="line"><span style="color:#A6ACCD;">docker run ubuntu</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span></code></pre></div><p>Perceba que rodar isso vai criar um container e, em seguida, ele vai parar. Isso acontece por que n\xE3o h\xE1 nenhum processo no interior do container em execu\xE7\xE3o e, de que adiantaria um container sem a\xE7\xE3o?</p><p>Se voc\xEA der um <code>docker ps -a</code> vai ver que o container est\xE1 l\xE1, por\xE9m, parada com STATUS <code>Exit (0) x seconds ago</code>. Ou seja, ele foi criado, subiu e morreu.</p><p>Para que este teste seja funcional, vamos fazer algo assim:</p><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki"><code><span class="line"><span style="color:#A6ACCD;">docker run -ti ubuntu bash</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span></code></pre></div><p>Isso vai te devolver um terminal interativo de dentro do container. \xC9 literalmente um sistema operacional isolado a\xED. Voc\xEA pode dar um <code>ls /home</code> e vai perceber que n\xE3o tem nada, diferente do seu pr\xF3prio ambiente, por exemplo.</p><p>Sabe aquele <code>rm -rf /</code> que tanto se zoa?! Voc\xEA pode rodar a\xED dentro.</p><p>Se voc\xEA tiver com medo, ok. Eu fiz, veja:</p><p><img src="https://dev-to-uploads.s3.amazonaws.com/i/g993df702m2jey7a625j.png" alt="apagando tudo dentro do container"></p><p>Perceba que, na primeira linha, \xE9 minha maquina <code>david@david-MacBookPro</code> e depois j\xE1 estou dentro do container.</p><p>Na \xFAltima linha n\xE3o \xE9 poss\xEDvel mais usar o bin\xE1rio <code>ls</code> pois ele foi exclu\xEDdo.</p><p>Agora perceba que eu posso sair (<code>CTRL+D</code>) e entrar de novo no container e ele ter\xE1 tudo de volta.</p><p><img src="https://dev-to-uploads.s3.amazonaws.com/i/firjth57zwszbnoqscpi.png" alt="retornando ao container ap\xF3s deletar tudo"></p><p>Isso foi apenas um <code>hello world</code> b\xE1sico. Em breve avan\xE7aremos mais.</p><p>O <code>docker run</code> possui diversos par\xE2metros \xFAteis, considere que ele \xE9 o cara que cria o container e precisamos de muitas coisas para nossas aplica\xE7\xF5es funcionarem, alguns exemplos s\xE3o as portas de redes, montagem de volumes de dados, limites de mem\xF3ria, etc.</p><p>Eu montei este outro artigo que \xE9 somente o retorno do <code>docker run --help</code> traduzido e com alguns considera\xE7\xF5es.</p><p><a href="https://dev.to/sr2ds/opcoes-do-comando-docker-run-g87" target="_blank" rel="noreferrer">Op\xE7\xF5es do Comando Docker Run</a></p><p>Vamos parando por aqui pois j\xE1 est\xE1 extenso demais!</p><p>Se alguma coisa aqui foi \xFAtil pra voc\xEA, deixe seu coment\xE1rio!</p><p>At\xE9 a pr\xF3xima.</p>`,67),i=[n];function c(p,t,d,l,u,m){return e(),o("div",null,i)}const g=a(r,[["render",c]]);export{h as __pageData,g as default};
